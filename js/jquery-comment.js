/*!
 * jquery-nested-comment v1.0.0 (http://hardyantz.com)
 * Copyright 2014 Hardyantz, Inc.
 * Licensed under http://www.apache.org/licenses/LICENSE-2.0
 */
if(typeof Object.create!=="function"){Object.create=function(e){function t(){}t.prototype=e;return new t}}(function(e,t,n,r){var i={init_:function(t,n){var r=this;r.elem=n;r.option=t;e(n).append(r.build_box_form());r.list_comments(n)},build_form:function(t){var n=this;var r=e("<div class='panel panel-body'></div>");if(t>0){r.addClass("reply_box")}var i=e("<form></form>");i.attr("method","POST");i.attr("url",this.url_submit);i.attr("id","comment_form_"+t);i.append(this.default_form_element);i.append(this.add_another_field());if(t>0){var s=e("<input></input>");s.attr("type","hidden");s.attr("name","parent_id");s.attr("value",t);i.append(s)}var o=e("<textarea></textarea>");o.attr("class","form-control");o.attr("id","comment_content");o.attr("name","comment_content");o.attr("rows","3");o.attr("placeholder","Enter Comment here");i.append(o);i.append("<br>");var u=e("<input></input>");u.attr("type","button");u.attr("class","btn btn-primary");u.attr("id","submit");u.attr("data-id",t);u.attr("value","Submit");u.on("click",function(t){t.preventDefault();var r=e("#comment_form_"+e(this).attr("data-id")).serialize();n.submit_form(r)});i.append(u);r.append(i);return r},box_form:function(){var t=e("<div class='panel panel-default'></div>");var n=e('<div class="panel panel-heading">'+this.option.title+"</div>");t.append(n);return t},default_form_element:function(){var t=[];var n=e("<div></div>");t[0]={type:"input",name:"username",id:"username",placeholder:"Enter your Username","class":"form-control"};t[1]={type:"input",name:"email",id:"email",placeholder:"Enter your E-Mail","class":"form-control"};for(var r=0;r<t.length;r++){var i=e("<div class='form-group'>");var s=e("<input></input>");for(value in t[r]){s.attr(value,t[r][value])}i.append(s);n.append(i)}return n},build_box_form:function(){var t=e(this.box_form());t.append(this.build_form(0));return t},add_another_field:function(){if(this.option.add_field){var t=this.option.add_field;var n=e("<div></div>");for(var r=0;r<t.length;r++){var i=e("<div class='form-group'>");var s=e("<input></input>");for(value in t[r]){s.attr(value,t[r][value])}i.append(s);n.append(i)}return n}},submit_form:function(t){var n=this;e("#comment_form input, #comment_form textarea").prop("disabled",true);e.post(this.option.url_submit,t,function(t){if(t.response==true){e(".list-group").remove();n.list_comments(n.elem);e("#comment_form input, #comment_form textarea").prop("disabled",false);e("#username, #email, #comment_content").prop("value","")}},"json")},build_list:function(t){var n=this;var r=e("<li></li>");r.attr("id","li-comment-"+t.comment_id);r.attr("class","list-group-item");var i=e("<article></article>");i.attr("class","comment");i.attr("id","comment-"+t.comment_id);r.append(i);var s=e("<header></header>");s.attr("class","comment-meta comment-author vcard");i.append(s);var o='<span style="float:right"><img width="44" height="44" class="avatar avatar-44 photo" src="'+t.imgurl+'" alt=""></span>';var u='<h4 class="list-group-item-heading">'+t.comment_author+"</h4>";var a='<p class="text-muted">'+t.comment_date+"</p>";s.append(o);s.append(u);s.append(a);var f='<section class="comment-content comment"><p>'+t.comment_content+"</p></section>";i.append(f);var l=e('<div class="reply"></div>');i.append(l);var c=e("<button></button>");c.attr("class","comment-reply-link btn btn-default btn-xs");c.attr("data-id",t.comment_id);c.html("Reply");c.on("click",function(t){t.preventDefault();e(".reply_box").remove();var r=e(this).attr("data-id");var i=n.build_form(r);e("#comment-"+r).append(i)});e(r).append("<br>");for(var h in t.children){child_list=n.build_list(t.children[h]);e(r).append(child_list)}l.append(c);return r},list_comments:function(t){var n=this;var r=n.get_data();var i=e("<div class='list-group'></div>");e(t).append(i);r.done(function(t){var r="";for(var s in t){r=n.build_list(t[s]);e(i).append(r)}})},get_data:function(){var t=this;return e.ajax({url:t.option.url_get,dataType:"json"})}};e.fn.comment=function(t){return this.each(function(){var n=Object.create(i);n.init_(t,this);e.data(this,"comment",n)})};e.fn.comment.options={title:"Form Comment",url_get:"#",url_submit:"#",add_field:null}})(jQuery,window,document)